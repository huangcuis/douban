!function(o){o.module("moviecat",["moviecat_home","moviecat_details","moviecat_movie_list","douban"]).controller("searchCtrl",["$scope","$window",function(o,e){o.query=function(){e.location.hash="#/search/?q="+o.keyWords,o.keyWords=""}}])}(angular),function(o){var e=o.module("moviecat_details",["ngRoute","douban"]);e.config(["$locationProvider",function(o){o.hashPrefix("")}]),e.config(["$routeProvider",function(o){o.when("/details/:id",{templateUrl:"./view/details.html",controller:"detailsCrol"})}]),e.controller("detailsCrol",["$scope","$routeParams","doubanJsonp",function(o,e,n){o.isShow=!0;var a=e.id;n.jsonp({url:"http://api.douban.com/v2/movie/subject/"+a,params:{},callback:function(e){o.isShow=!1,o.movie=e,o.$apply()}})}])}(angular),function(o){var e=o.module("moviecat_home",["ngRoute"]);e.config(["$locationProvider",function(o){o.hashPrefix("")}]),e.config(["$routeProvider",function(o){o.when("/home",{templateUrl:"./view/home.html"}).when("/",{redirectTo:"/home"})}])}(angular),function(o){var e=o.module("moviecat_movie_list",["ngRoute","douban"]);e.config(["$routeProvider",function(o){o.when("/:type/:page?",{templateUrl:"./view/movie_list.html",controller:"movie_listCtrl"})}]),e.controller("movie_listCtrl",["$scope","$routeParams","$route","$window","doubanJsonp",function(o,e,n,a,t){o.isShow=!0,o.pageSize=10,o.pageIndex=(e.page||"1")-0,t.jsonp({url:"http://api.douban.com/v2/movie/"+e.type,params:{count:o.pageSize,start:(o.pageIndex-1)*o.pageSize,q:e.q},callback:function(e){o.movies=e,o.isShow=!1,o.pageCount=a.Math.ceil(e.total/o.pageSize),o.$apply()}}),o.getPage=function(e){e<1||e>o.pageCount||n.updateParams({page:e})}}])}(angular),function(o){var e=o.module("douban",[]);e.service("doubanJsonp",["$window",function(o){this.jsonp=function(e){var n=e.url+"?";for(var a in e.params)n+=a+"="+e.params[a]+"&";var t="jsonp_"+o.Math.random().toString().slice(2);o[t]=e.callback,n+="callback="+t;var i=o.document.createElement("script");i.src=n,o.document.body.appendChild(i)}}]),e.directive("hmActive",function(){return{restrict:"EA",link:function(o,e,n){e.on("click",function(){e.parent().children().removeClass("active"),e.addClass("active")})}}})}(angular);